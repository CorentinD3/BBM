{% block script %}<script async defer src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&callback=initMap"></script>{% endblock %}

<div class="mx-auto w-full px-6">

    <!-- Section: Design Block -->
    <section class=" text-gray-800 text-center">

        <div class="">
                <div class="grid lg:grid-cols-2 flex items-center">
                    <div style="z-index: 1" class="">
                        <div class="pb-12 text-white border-end">
                            <p class="font-regitha text-3xl text-orange-950 mx-4 leading-relaxed ">Beauty by M.<br>Dunkerque</p>

                        </div>
                        <div class="relative bg-[#fbeae6] block h-auto px-6 py-12 md:px-6 lg:-mr-14 rounded-lg border-2 border-black shadow-[0px_3px_10px_rgba(0,0,0,0.5)]">

                            <div class=" flex justify-between lg:gap-0 gap-10 mx-auto max-w-3xl">
                                <!-- Première icône avec adresse -->
                                <div class="text-center flex-1">
                                    <div class="relative w-16 h-16 flex items-center justify-center rounded-full border-2 border-orange-950 mx-auto">
                                        <!-- SVG pour le map pin -->
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#431407"
                                             class="w-10 h-10 text-blue-60 0">
                                            <path fill-rule="evenodd"
                                                  d="M12 2C8.686 2 6 4.686 6 8c0 4.73 6 13 6 13s6-8.27 6-13c0-3.314-2.686-6-6-6zm0 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h6 class="font-lato text-lg leading-relaxed text-orange-950 mt-4 ">
                                        81 Rue Albert Cuenin,<br> 59240 Dunkerque
                                    </h6>
                                </div>

                                <!-- Deuxième icône avec numéro de téléphone -->
                                <div class="text-center flex-1 ">
                                    <div class="relative w-16 h-16 flex items-center justify-center rounded-full border-2 border-orange-950 mx-auto">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#431407"
                                             class="w-8 h-8 text-blue-600">
                                            <path fill-rule="evenodd"
                                                  d="M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <a class="font-lato text-lg leading-relaxed text-orange-950 mt-4 inline-block " href="tel:07 67 17 14 19">
                                        07 67 17 14 19
                                    </a>
                                </div>
                            </div>

                            <div class=" flex items-center justify-center">
                                <div class="text-center relative">
                                    <!-- Icône SVG -->
                                    <div class="relative w-12 h-12 lg:w-16 lg:h-16 flex items-center justify-center rounded-full border-2 border-orange-950 mx-auto">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="w-8 h-8 lg:w-10 lg:h-10">
                                            <g>
                                                <path d="M26,23.277V7h-2v16.277c-0.595,0.346-1,0.984-1,1.723c0,0.178,0.031,0.347,0.074,0.512l-8.781,8.781l1.414,1.414	l8.781-8.781C24.653,26.969,24.822,27,25,27c1.104,0,2-0.895,2-2C27,24.262,26.595,23.624,26,23.277z"
                                                      fill="#431407" stroke="#431407" stroke-width="2"></path>
                                            </g>
                                        </svg>
                                    </div>

                                    <!-- Bouton Déroulant -->
                                    <button id="buttonBergues" class="inline-block mt-4 py-2 px-4 lg:px-6 border-2 border-black font-lato text-lg leading-relaxed text-orange-950 rounded-lg shadow-md
               hover:bg-red-50
               transition duration-200 ease-in-out flex items-center justify-center flex-shrink-0 w-full lg:w-auto" type="button">
            <span id="currentDayBergues" class="font-medium text-orange-950 truncate text-sm lg:text-base">
                <!-- Heures d'ouverture -->
            </span>
                                        <svg aria-hidden="true" focusable="false" data-prefix="fas"
                                             data-icon="caret-down" class="w-2 ml-2" role="img"
                                             xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                                            <path fill="currentColor"
                                                  d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"></path>
                                        </svg>
                                    </button>

                                    <!-- Table Déroulante -->
                                        <span id="tableBergues" class="absolute text-sm px-4 left-1/2 transform -translate-x-1/2 font-normal block w-fit mx-auto whitespace-nowrap bg-red-50 text-white rounded-lg shadow-lg mt-2 overflow-hidden max-h-0 transition-all duration-500 ease-in-out ">

                                      <table class="table-auto ">

                                     <tbody class="font-medium text-orange-950 truncate text-sm">
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Lundi</td>
                                          <td>11:00–18:00</td>
                                        </tr>
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Mardi</td>
                                          <td>10:00–19:00</td>
                                        </tr>
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Mercredi</td>
                                          <td>10:00–15:00</td>
                                        </tr>
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Jeudi</td>
                                          <td>10:00–19:00</td>
                                        </tr>
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Vendredi</td>
                                          <td>11:30–16:00</td>
                                        </tr>
                                        <tr class="border-b-[1px] border-stone-500">
                                          <td class="py-2 pr-12">Samedi</td>
                                          <td>Fermé</td>
                                        </tr>
                                         <tr>
                                          <td class="py-2 pr-12">Dimanche</td>
                                          <td>Fermé</td>
                                        </tr>
                                      </tbody>
                                </table>
                            </span>
                                </div>
                            </div>
                        </div>

                        <a
                                href="#"
                                target="_blank"
                                data-location="bergues"
                                id="mapLinkBergues"
                                class="lg:w-auto w-full lg:mx-12 mx-0 px-6 mx-auto flex justify-center shadow-2xl text-white font-medium py-2 rounded-md bg-[#5d7f64] transition hover:bg-[#4a6350] gap-2 my-12 border-2 border-black z-0 shadow-[0px_3px_10px_rgba(0,0,0,0.5)]"
                        >
                            <span class="link-text font-lato leading-relaxed">Afficher dans Maps</span>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m20.893 13.393-1.135-1.135a2.252 2.252 0 0 1-.421-.585l-1.08-2.16a.414.414 0 0 0-.663-.107.827.827 0 0 1-.812.21l-1.273-.363a.89.89 0 0 0-.738 1.595l.587.39c.59.395.674 1.23.172 1.732l-.2.2c-.212.212-.33.498-.33.796v.41c0 .409-.11.809-.32 1.158l-1.315 2.191a2.11 2.11 0 0 1-1.81 1.025 1.055 1.055 0 0 1-1.055-1.055v-1.172c0-.92-.56-1.747-1.414-2.089l-.655-.261a2.25 2.25 0 0 1-1.383-2.46l.007-.042a2.25 2.25 0 0 1 .29-.787l.09-.15a2.25 2.25 0 0 1 2.37-1.048l1.178.236a1.125 1.125 0 0 0 1.302-.795l.208-.73a1.125 1.125 0 0 0-.578-1.315l-.665-.332-.091.091a2.25 2.25 0 0 1-1.591.659h-.18c-.249 0-.487.1-.662.274a.931.931 0 0 1-1.458-1.137l1.411-2.353a2.25 2.25 0 0 0 .286-.76m11.928 9.869A9 9 0 0 0 8.965 3.525m11.928 9.868A9 9 0 1 1 8.965 3.525" />
                            </svg>
                        </a>


                    </div>

                    <div class="rounded-lg border-2 border-black shadow-lg">
                        <div id="mapBergues" style="height: 700px" class="relative shadow-[0px_3px_10px_rgba(0,0,0,0.5)] rounded-lg"></div>

                    </div>
                </div>

        </div>

    </section>

</div>
<script>

    function initMap() {
        // Configuration pour la carte de Bergues
        const berguesOptions = {
            center: {lat: 51.0430257, lng: 2.409702},
            zoom: 18,
            mapTypeId: 'hybrid',
            disableDefaultUI: true,
            zoomControl: true,
            scaleControl: true,
            streetViewControl: true,
            fullscreenControl: true,
            gestureHandling: 'cooperative',
            styles: [
                {featureType: 'road', elementType: 'all', stylers: [{visibility: 'off'}]},
                {featureType: 'poi', elementType: 'all', stylers: [{visibility: 'on'}]},
            ],
        };

        const mapBergues = new google.maps.Map(document.getElementById('mapBergues'), berguesOptions);

        const berguesMarker = new google.maps.Marker({
            position: {lat: 51.0430257, lng: 2.409702},
            map: mapBergues,
            title: "Bienvenue à Bergues !",
            draggable: true,
            animation: google.maps.Animation.DROP,
        });
    }

    let buttonBergues = document.getElementById("buttonBergues");
    let tableBergues = document.getElementById("tableBergues");
    const todayIndex = new Date().getDay();

    buttonBergues.addEventListener("click", function () {
        tableBergues.classList.toggle("max-h-0");
        tableBergues.classList.toggle("max-h-[500px]");
        tableBergues.classList.toggle("border-2");
        tableBergues.classList.toggle("border-black");
        tableBergues.classList.toggle("py-2");
    });

    // Fermer la table si on clique en dehors
    document.addEventListener("click", function (event) {
        if (!tableBergues.contains(event.target) && !buttonBergues.contains(event.target)) {


            tableBergues.classList.add("max-h-0");
            tableBergues.classList.remove("max-h-[500px]");
            tableBergues.classList.remove("border-2");
            tableBergues.classList.remove("border-black");
            tableBergues.classList.remove("py-2");

        }
    });

    const daysBergues = [
        { day: "Lundi", hours: "11:00–18:00" },
        { day: "Mardi", hours: "10:00–19:00" },
        { day: "Mercredi", hours: "10:00–15:00" },
        { day: "Jeudi", hours: "10:00–19:00" },
        { day: "Vendredi", hours: "11:30–16:00" },
        { day: "Samedi", hours: "Fermé" },
        { day: "Dimanche", hours: "Fermé" },
    ];


    // Correspondre au tableau `days` (ajuster l'index pour que 0 soit "Dimanche")
    const bergues = daysBergues[todayIndex === 0 ? 6 : todayIndex - 1];


    const currentDayBergues = document.getElementById("currentDayBergues");
    if (currentDayBergues) {
        currentDayBergues.textContent = `${bergues.day} : ${bergues.hours}`;
    }
</script>
